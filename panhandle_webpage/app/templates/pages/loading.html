{% extends '/pages/layout.html' %}

{% block content %}
    <div class="container-fluid" style="height: 150px;">
        <div class="row">
            <p class="h1">Loading Package</p>
        </div>
    <!--  <style>
    table, th, td {
        border: 1px solid black;
    }
    </style> -->
    <script>
        var socket=io.connect('http://'+document.domain+':'+location.port+'/loading');
        socket.on('connect', function(){console.log('Connected!');});
        socket.on('refresh', function(msg){
            console.log(msg);
            if(msg!=null){
                $("#curr_red").text(msg[0]['red']);
                $("#curr_green").text(msg[0]['green']);
                $("#curr_blue").text(msg[0]['blue']);
            }
            else{
                $("#curr_red").text(0);
                $("#curr_green").text(0);
                $("#curr_blue").text(0);
            }
        });

        socket.on('inventory', function(msg){
            console.log(msg);
            $("#inven_red").text(msg['red']);
            $("#inven_green").text(msg['green']);
            $("#inven_blue").text(msg['blue']);
        });


	    function reset() {
            console.log("reset")
            socket.emit('button', "reset n");
        }
        function schedule() {
            console.log("schedule")
            socket.emit('button', "schedule n");
        }
        function complete() {
            console.log("complete")
            socket.emit('button', "complete n");
        }
        function replenish() {
            console.log("replenish")
            socket.emit('button', "replenish n");
        }
    </script>

	<script>
		var package_color = ['Red', 'Green', 'Blue'];
	</script>
        <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group" role="group" aria-label="First group">
                <button type="button" class="btn" style="width: 180px; height: 50px;  background-color: #ffc209;" onclick="schedule()">
                    <span class="align-bottom font-weight-normal" style="color: #424242">Schedule Delivery</span>
                </button>
                <button type="button" class="btn" style="width: 180px; height: 50px;background-color: #bdbdbd;" onclick="complete()">
                    <span class="align-bottom font-weight-normal" style="color: #424242">Start Delivery</span>
                </button>
            </div>
            <div class="btn-group" role="group" aria-label="Second group">
                <button type="button" class="btn" style="width: 180px; height: 50px;  background-color: #9a0007;" onclick="reset()">
                    <span class="align-bottom font-weight-normal" style="color: #ffffff">Reset Schedule</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container-fluid" style="height: 220px;">
        <div class="row">
            <p class="h2">Next Packages to Load</p>
        </div>
        <table class="table table-borderless" style="height:150px; text-align: center;">
            <tr>
	            <td id="curr_red" class="w-25 align-middle bg-danger rounded">
                    <p class="h2 text-white font-weight-normal">{{current_order.red}}</p>
                </td>
	            <td id="curr_green" class="w-25 align-middle bg-success rounded">
                    <p class="h2 text-white font-weight-normal">{{current_order.green}}</p>
                </td>
	            <td id="curr_blue" class="w-25 align-middle bg-primary rounded">
                    <p class="h2 text-white font-weight-normal">{{current_order.blue}}</p>
                </td>
            </tr>
        </table>
    </div>

    <div class="container-fluid" style="height: 300px;">
        <div class="row">
            <p class="h2">Stocks in Inventory</p>  	 
        </div>
        <table class="table table-borderless" style="height: 150px; text-align: center;">
            <tr>
	            <td id="inven_red" class="w-25 align-middle table-danger rounded">
                    <p class="h2 text-black-50 font-weight-normal">{{inventory.red}}</p>
                </td>
	            <td id="inven_green" class="w-25 align-middle table-success rounded">
                    <p class="h2 text-black-50 font-weight-normal">{{inventory.green}}</p>
                </td>
	            <td id="inven_blue" class="w-25 align-middle table-primary rounded">
                    <p class="h2 text-black-50 font-weight-normal">{{inventory.blue}}</p>
                </td>
            </tr>
        </table>
        <div>
            <button class="btn btn-block" type="button" style="background-color: #bdbdbd; border-color: #ffc209; border-width: 2px;" onclick="replenish()">
                <span class="align-bottom" style="color: #424242;">Replenish the inventory</span>
            </button>
        </div>
    </div>

{% endblock %}
