<html>
<head>
    <title>Maintenance</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
</head>
<body>
    <h1>Nozama Panhandle</h1>
    <h2>Access List</h2>
    <ul>
        <script>
            var page_list = ['Loading', 'Unloading', 'Maintenance'];
            var page_idx = 0;
            while(page_idx < page_list.length) {
                document.write('<li><a href="http://mellon.andrew.cmu.edu:8888/' + page_list[page_idx].toLowerCase() + '">' + page_list[page_idx] + '</a></li>');
                page_idx = page_idx + 1;
            }
        </script>
    </ul>
    <h2>Page for System Maintenance</h2>
    <h3>line</h3>
    <img src="http://rpi-6.wifi.local.cmu.edu:8888/video_feed" width="640" height="480"></img>
    <p>W: forward, A: left, D: right, S: backward</p>
    <div id="Wkey" style="text-align:center;font-weight:bold;font-size:25px;position:relative;width:50px;height:50px;top:0px;left:70px;border:5px solid #000;">W</div>
    <div id="Akey" style="text-align:center;font-weight:bold;font-size:25px;position:relative;width:50px;height:50px;top:10px;left:0px;border:5px solid #000;">A</div>
    <div id="Skey" style="text-align:center;font-weight:bold;font-size:25px;position:relative;width:50px;height:50px;top:-50px;left:70px;border:5px solid #000;">S</div>
    <div id="Dkey" style="text-align:center;font-weight:bold;font-size:25px;position:relative;width:50px;height:50px;top:-110px;left:140px;border:5px solid #000;">D</div>
<!--    <img src="http://mellon.andrew.cmu.edu:8888/video_feed" width="640" height="480"></img> -->
</body>
</html>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
//var socket = io.connect('ws://mellon.andrew.cmu.edu:8888');

//$(document).keypress(function(e){
//    if(e.keycode == 119){
//        conn.send("w");
//    }
//});
var socket=io.connect('http://'+document.domain+':'+location.port);

socket.on('connect', function(){console.log('Connected!');});

//$(document).keypress(function(e){
//    socket.emit('button', e['key']+" p");
//    console.log(e['key']+ ' p')
//});

$(document).keydown(function(e){
    key=e['key']
    socket.emit('button', e['key']+" d");
    console.log(e['key']+' down')
    switch(key){
        case 'w':
            document.getElementById("Wkey").style.backgroundColor="blue";
            break;
        case 'a':
            document.getElementById("Akey").style.backgroundColor="blue";
            break;
        case 's':
            document.getElementById("Skey").style.backgroundColor="blue";
            break;
        case 'd':
            document.getElementById("Dkey").style.backgroundColor="blue";
            break;
    }
});
$(document).keyup(function(e){
    key=e['key']
    socket.emit('button', e['key']+" u");
    console.log(e['key']+' up')
    switch(key){
        case 'w':
            document.getElementById("Wkey").style.backgroundColor="white";
            break;
        case 'a':
            document.getElementById("Akey").style.backgroundColor="white";
            break;
        case 's':
            document.getElementById("Skey").style.backgroundColor="white";
            break;
        case 'd':
            document.getElementById("Dkey").style.backgroundColor="white";
            break;
    }
});
</script>
<script>
    function listing_pages(pages) {
        var link = new Array(pages.length);

        }
    }
</script>
